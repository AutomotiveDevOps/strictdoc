<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <link rel="stylesheet" href="static/global.css" />
  <link rel="stylesheet" href="static/layout-main-with-toc.css" />
  <link rel="stylesheet" href="static/single_document.css" />
  <title>{{document.name}} - Traceability</title>
</head>

<body>

{%- set document_iterator = traceability_index.get_document_iterator(document) -%}

<div class="layout-with-toc open">

  <aside class="toc">
    {% include "_shared/table_of_contents.jinja.html" %}
  </aside>

<main class="content">
  <h1 class="document-title">{{document.name}}</h1>

{%- for section_or_requirement in document_iterator.all_content() %}
  {%- if section_or_requirement.is_requirement %}
    {%- set requirement = section_or_requirement %}
    {% include "single_document/requirement.jinja.html" %}
  {%- elif section_or_requirement.is_section %}
    {%- set section = section_or_requirement %}

    <span id="{{ string_to_anchor_id(section_or_requirement.title) }}"></span>

    <h{{ section.ng_level }} class="section-title">
      <span class="section-number">
        {{ section.export_title }}
      </span>
      {{ section.title }}
    </h{{ section.ng_level }}>
  {%- elif section_or_requirement.is_free_text %}
    {%- set freetext = section_or_requirement %}
    {{ renderer.render_text_fragment(freetext.text) }}
  {%- endif %}
{%- endfor %}

</main>

</div>

</body>
